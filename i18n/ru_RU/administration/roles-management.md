# Управление ролями

## Обзор

Чтобы ограничить доступ для некоторых пользователей, вам нужно использовать роли. Администратор может управлять ролями в панели администрирования. Каждая роль определяет доступ к определенным областям, который применяется к пользователям, которые владеют этой ролью.

Один пользователь может иметь несколько ролей. Эти роли могут быть выбраны для определенного пользователя (поле «Роли» в записи пользователя) и/или быть унаследованы от групп, к которым принадлежит пользователь.

Если у пользователя несколько ролей, они будут объединены, так что разрешающее правило будет иметь более высокий приоритет. Это позволяет администратору легко и гибко управлять уровнем доступа.

Можно увидеть, какие разрешения применяются к определенному пользователю, нажав кнопку «Доступ» на подробном представлении пользователя.

![1](https://raw.githubusercontent.com/espocrm/documentation/master/docs/_static/images/administration/roles-management/scope-level.png)

По умолчанию пользователи могут удалять самостоятельно назначенные записи, которые они создали в течение определенного периода времени. Существует возможность отключить эту возможность в разделе Администрирование > Настройки > Разрешить удаление созданных записей.

## Разрешения по умолчанию

По умолчанию (если роли не применены или у роли нет установленных разрешений) пользователи имеют полный доступ. Существует возможность ограничить доступ, применяемый по умолчанию, включив «ACL Strict Mode» в разделе Администрирование > Настройки.

## Действия
* Создать - возможность создавать записи;
* Чтение - возможность просмотра записей (в списках и детализациях);
* Редактирование - возможность обновления записей;
* Удаление - возможность удалять записи;
* Лента - возможность просматривать ленту записи.

## Пример

Например, пользователь принадлежит группе `Продажи`. У этой группы есть единственная роль `Продавца`. Таким образом, все пользователи из этой группы получат роль `Продавца`.

Роль `продавца` определяется следующим образом:

Кандидат:
```
создать - да
чтение - группа
редактирование - владелец
удаление - нет
лента - группа
```

Сделка:
```
создать - да
чтение – группа
рекдатирование – владелец
удаление – нет
поток - группа
```

Пользователи смогут читать только тех кандидатов и сделки, которые принадлежат группе `Отдел продаж` (поле «Группы»).
Пользователь сможет редактировать только тех кандидатов и сделки, которые им назначены, или те, которые они создали.
Пользователи не смогут удалять кандидатов и сделки.

Мы хотим предоставить больше прав определенному пользователю, занимающему должность менеджера по продажам в компании. Этот сотрудник должен иметь возможность читать/редактировать/удалять все записи из группы `Продажи`. Пользователь должен принадлежать нашей группе `Продажи`. Но нам нужно создать новую роль `Менеджер продаж` и выбрать эту роль для этого пользователя в поле `Роли`.

Роль `менеджера продаж` определяется следующим образом:

Кандидат:
```
создать - да
чтение – группа
редактирование – группа
удаление – группа
лентк - группа
```

Сделки:
```
создать - да
чтение – группа
редактирование – группа
удаление – группа
лента - группа
```

Наш пользователь сможет управлять всеми кандидатами и сделками из группы `Продажи`.

## Специальные разрешения

### Разрешение для назначения

Установите этот параметр, чтобы ограничить возможность переназначения записей другому пользователю и/или группе. Если вы установите `группа`, тогда можно будет назначить только пользователей из собственной группы. Если `нет` - пользователи не смогут повторно назначать.

Оно также определяет, может ли пользователь отправлять сообщения другим пользователям/группам.

### Разрешение видеть пользователей 

Позволяет ограничить возможность просмотра пользователями действий, календаря и ленты других пользователей.

### Разрешение портала

Определяет доступ к информации портала, возможность отправлять сообщения пользователям портала.

### Разрешение для учетной записи эл. почты группы 

Определяет доступ к групповым учетным записям электронной почты, возможность отправлять электронные письма из SMTP группы.

### Разрешение на экспорт

Устанавливает, имеет ли пользователь возможность экспортировать записи. (начиная с версии 4.9.0)

## Безопасность на уровне полей (Field Level Security)

Позволяет контролировать доступ для определенных полей.

По умолчанию пользователь может читать все поля, если он может прочитать запись. Пользователь может редактировать любое поле, если он может редактировать запись. Вы можете ограничить доступ к определенным полям с помощью безопасности на уровне полей.

В режиме редактирования записи роли в разделе Уровень поля (Field Level) щелкните значок плюс рядом с определенной областью, затем выберите нужное поле. Тогда вы сможете указать уровень доступа для действий `чтение` и` редактирование`. Есть варианты: `да` и` нет`.

![2](https://raw.githubusercontent.com/espocrm/documentation/master/docs/_static/images/administration/roles-management/field-level-secutiry.png)
