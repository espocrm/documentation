# Отчеты

Функция отчетов доступна в [Advanced Pack](https://www.espocrm.com/extensions/advanced-pack/).

Существует два типа отчетов: список и сетка.

## Отчет-список

Отчет-список выводит те записи, которые соответствуют указанным критериям.

Чтобы создать новый отчет-список, нажмите вкладку «Отчеты», а затем нажмите кнопку «Создать отчет». Выберите необходимый тип объекта, затем нажмите кнопку «Создать» в разделе «Отчет-список».

В поле _Columns_ выберите поля, которые вы хотите отобразить. Ниже вы можете указать параметры отображения для каждого столбца, например: ширину и выравнивание.

Выберите необходимую сортировку в поле _List Order_.

В разделе _Фильтры_ вы можете указать критерии, которые определят, какие записи будут перечислены в вашем отчете. Вы можете использовать логические операторы «ИЛИ», «И».

_Фильтры при воспроизведении_ позволяют вам указывать разные фильтры перед запуском отчета.

Вы можете __экспортировать__ результаты отчета в формате excel и csv.

## Отчет-сетка

В отчете по сетке суммируются значения, сгруппированные по указанным полям. Эти отчеты могут отображаться в виде диаграммы.

![Grid reports](https://raw.githubusercontent.com/espocrm/documentation/master/docs/_static/images/user-guide/reports/grid.png)

Чтобы создать новый отчет-сетку, нажмите вкладку «Отчеты», а затем нажмите кнопку «Создать отчет». Выберите необходимый тип объекта, затем нажмите кнопку «Создать» в разделе «Отчет-сетка».

В поле _Группировать по_ выберите одно или два поля, по которым вы хотите сгруппировать ваши данные отчета. Можно группировать по месяцам, месяцам, дням поля даты. Если вы группируете по двум полям, ваш отчет будет считаться трехмерным.

В поле _Колонки_ выберите одну или несколько совокупных функций, таких как КОЛИЧЕСТВО, СУММА, МАКСИМАЛЬНОЕ, МИНИМАЛЬНОЕ, СРЕДНЕЕ.

Поле _Сортировать по_ определяет, как будут сортироваться данные отчета.

В разделе _Фильтры_ вы можете указать критерии, определяющие, какие записи будут использоваться в вашем отчете. Вы можете использовать логические операторы «ИЛИ», «И».

_Фильтры при воспроизведении_ позволяет вам указать разные фильтры перед запуском отчета.

Отчет-сетка позволяет отображать результаты в форме диаграммы. Существуют следующие типы _Графиков_: Столбиковый, Ленточный, Секторный, Линейный.

Результаты отчета-сетки можно __экспортировать__ в формате excel и csv.

## Фильтры

#### Фильтр полей

Простой в использовании тип фильтров. Вы также можете выбрать поля целевого объекта, а также связанные с ним объекты.

![Field filter](https://raw.githubusercontent.com/espocrm/documentation/master/docs/_static/images/user-guide/reports/filter-field.png)

### Группа ИЛИ

Или означает, что по крайней мере одно условие в группе должно быть выполнено.

![OR group](https://raw.githubusercontent.com/espocrm/documentation/master/docs/_static/images/user-guide/reports/filter-or.png)

### Группа И 

И означает, что все условия в группе должны быть выполнены.

### Группа NOT

Обеспечивает возможность фильтрации записей, не соответствующих заданным критериям. Например: перечисление контрагентов, которые не имеют сделок с закрытым статусом «Закрыто-Успех» или «Закрыто-Провал».

![NOT group](https://raw.githubusercontent.com/espocrm/documentation/master/docs/_static/images/user-guide/reports/filter-not.png)

### Комплексное выражение

Для более продвинутого использования. Вы можете применить функцию для определенного столбца базы данных и сравнить ее с результатом выражения [formula](../administration/formula.md).

Примечание. Если вам нужно сравнить только с простым строковым значением, вы должны поместить его в одинарные кавычки `'некоторые строки'`.

Примечание. Функции, предназначенные для взаимодействия с записью сущности, здесь не работают, потому что формальная форма не применяется к конкретной записи.

![Complex Expression filter](https://raw.githubusercontent.com/espocrm/documentation/master/docs/_static/images/user-guide/reports/filter-complex.png)

 ## Группа Having 
Группа Having беспечивает возможность фильтрации с использованием агрегатных функций COUNT, SUM, MAX, MIN, AVG.

Некоторые варианты использования:

* Список контрагентов, имеющих более одной сделки. `COUNT / opportunities.id / Greater Than / 1.`
* Отчет-сетка отображающий контрагентов, сгруппированных по отраслям, где доход превышает 1000 человек.`SUM / opportunities.amount / Greater Than / 1000.` 

Примечание. Совместимо с EspoCRM версий 5.1.0 и выше.

## Отображение на панели управления

Вы можете отображать любой отчет на панели управления. Для этого вам нужно добавить виджет Report, а затем выбрать нужный отчет в параметрах виджета.

На виджете можно отображать только общую сумму.

## Отправка по электронной почте

Можно настроить систему для отправки результатов отчета определенным пользователям на регулярной основе в указанное время. Это должно быть настроено для определенных отчетов индивидуально.

## Синхронизация с целевыми списками

Можно синхронизировать списки целей с результатами отчетов-списков. Это удобно для массовой рассылки электронной почты, когда вы хотите отправлять электронные письма только контактам, которые соответствуют определенным критериям в момент отправки. Эта функция доступна в подробном представлении любого целевого списка на панели «Синхронизировать с отчетами».

## Фильтры отчетов (фильтры представления списка на основе отчетов)

Совместимы с EspoCRM 5.1.0 и выше.

Администратор может создавать настраиваемые фильтры представления списка на основе определенных отчетов. Доступно в Администрирование > Фильтры отчетов. Можно указать группы, которые будут иметь доступ к фильтру.

Примечание. Макет, указанный в отчете, не применяется к представлению списка при выборе фильтра.

## Панели отчета (панели подробного просмотра, показывающие результаты отчета)

Совместим с EspoCRM 5.1.0 и выше.

Администратор может создавать пользовательские боковую и нижнюю панели для подробного просмотра определенного типа объекта. Можно указать группы, которые будут иметь доступ к панели.

Оба отчеты (сетка и список) могут быть использованы.

На панели отчетов можно отобразить только общую сумму.

Порядок боковых панелей можно настроить в Менеджере макетов > Боковые панели (Detail).

Порядок нижних панелей указан в записи панели отчетов. Возможно разместить панель перед панелью Лента, перед панелями Отношений или в самом низу.

Панель отчетов показывает результаты, связанные с просматриваемой записи. Первое найденное отношение используется. Если в отчете имеется соответствующий фильтр при воспроизведении, он будет использоваться для ограничения результатов. Фильтр при воспроизведении должен быть полем типа link, link-multiple или link-parent.
